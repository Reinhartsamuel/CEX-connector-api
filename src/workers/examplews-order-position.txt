Last login: Thu Dec 11 04:10:47 on ttys004
reinhartsulilatu@Reinharts-MacBook-Pro byscript-connector-api % bun run src/workers/gateWorkerRunner.ts
WS Worker: Listening for control commands...
WS Worker: Opening WS for user 16778193
WS Worker: WS OPEN for user 16778193
ğŸ“¡ SUBSCRIBED (ORDERS) user=16778193
ğŸ“¡ SUBSCRIBED (POSITIONS) user=16778193
ğŸ“¥ ORDERS UPDATE (16778193): {
  "time": 1765654561,
  "time_ms": 1765654561199,
  "conn_id": "0c6c206c262ccddf",
  "trace_id": "41d2141e3a4ebd411fec6ae32f91113b",
  "channel": "futures.orders",
  "event": "subscribe",
  "payload": [
    "16778193",
    "!all"
  ],
  "result": {
    "status": "success"
  }
}
ğŸ¤®ğŸ¤®ğŸ¤®ğŸ¤®ğŸ¤®ğŸ¤®classified order event: subscribe_ack
ğŸ“¥ POSITIONS UPDATE (16778193): {
  "time": 1765654561,
  "time_ms": 1765654561199,
  "conn_id": "0c6c206c262ccddf",
  "trace_id": "41d2141e3a4ebd411fec6ae32f91113b",
  "channel": "futures.positions",
  "event": "subscribe",
  "payload": [
    "16778193",
    "!all"
  ],
  "result": {
    "status": "success"
  }
}
ğŸš—ğŸš—ğŸš—ğŸš—ğŸš—ğŸš—ğŸš— item: {"status":"success"}, please ignore if undefined false
ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ getting previous position data for user:16778193:positions positionKey: undefined:: undefinedğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€
ğŸ§­ position event: position_heartbeat for undefined:
ğŸ“ PING â†’ user=16778193
ğŸ“ PING â†’ user=16778193
ğŸ“ PING â†’ user=16778193
ğŸ“¥ ORDERS UPDATE (16778193): {
  "time": 1765654652,
  "time_ms": 1765654652126,
  "channel": "futures.orders",
  "event": "update",
  "result": [
    {
      "create_time": 1765654559,
      "create_time_ms": 1765654559909,
      "fill_price": 0.13898,
      "finish_as": "filled",
      "iceberg": 0,
      "id": "56013524660920448",
      "id_string": "56013524660920448",
      "is_close": false,
      "is_liq": false,
      "left": 0,
      "mkfr": 0.0002,
      "is_reduce_only": false,
      "status": "finished",
      "tkfr": 0.0005,
      "price": 0.13898,
      "refu": 0,
      "refr": 0,
      "size": -1,
      "text": "api",
      "tif": "gtc",
      "finish_time": 1765654652,
      "finish_time_ms": 1765654652125,
      "user": "16778193",
      "contract": "DOGE_USDT",
      "stop_profit_price": "",
      "stop_loss_price": "",
      "amend_text": "-",
      "biz_info": "dual",
      "stp_act": "-",
      "stp_id": "0",
      "update_id": 2,
      "is_voucher": false,
      "update_time": 1765654652125,
      "fee": 0.00027796,
      "point_fee": 0,
      "role": "maker",
      "bbo": "-"
    }
  ]
}
ğŸ¤®ğŸ¤®ğŸ¤®ğŸ¤®ğŸ¤®ğŸ¤®classified order event: order_filled_open
getting trades with trade.id: 56013524660920448
ğŸ“¥ POSITIONS UPDATE (16778193): {
  "time": 1765654652,
  "time_ms": 1765654652126,
  "channel": "futures.positions",
  "event": "update",
  "result": [
    {
      "time": 1765654652,
      "time_ms": 1765654652125,
      "size": -1,
      "user": "16778193",
      "leverage_max": 100,
      "mode": "dual_short",
      "update_id": 868,
      "cross_leverage_limit": 2,
      "liq_price": 0.20743,
      "maintenance_rate": 0.15,
      "risk_limit": 70000000,
      "last_close_pnl": -0.0008733,
      "entry_price": 0.13898,
      "leverage": 2,
      "realised_pnl": -0.00027796,
      "contract": "DOGE_USDT",
      "history_point": 0,
      "margin": 0.696463525,
      "realised_point": 0,
      "history_pnl": 0.048109197,
      "margin_mode": "isolated",
      "lever": "2"
    }
  ]
}
ğŸš—ğŸš—ğŸš—ğŸš—ğŸš—ğŸš—ğŸš— item: {"time":1765654652,"time_ms":1765654652125,"size":-1,"user":"16778193","leverage_max":100,"mode":"dual_short","update_id":868,"cross_leverage_limit":2,"liq_price":0.20743,"maintenance_rate":0.15,"risk_limit":70000000,"last_close_pnl":-0.0008733,"entry_price":0.13898,"leverage":2,"realised_pnl":-0.00027796,"contract":"DOGE_USDT","history_point":0,"margin":0.696463525,"realised_point":0,"history_pnl":0.048109197,"margin_mode":"isolated","lever":"2"}, please ignore if undefined false
ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ getting previous position data for user:16778193:positions positionKey: DOGE_USDT:dual_short: undefinedğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€
ğŸ§­ position event: position_opened for DOGE_USDT:dual_short
updating trade id 56013524660920448 to "waiting_targets"
trade Data::::: please handle TP/SL {
  "id": 41,
  "user_id": 1,
  "exchange_id": 1,
  "trade_id": "56013524660920448",
  "order_id": "56013524660920448",
  "open_order_id": "56013524660920448",
  "open_fill_price": null,
  "open_filled_at": null,
  "close_order_id": null,
  "close_filled_at": null,
  "close_reason": null,
  "contract": "DOGE_USDT",
  "position_type": "short",
  "market_type": "limit",
  "size": "-1.00000000",
  "price": "0.13898000",
  "leverage": 10,
  "leverage_type": "ISOLATED",
  "pnl": null,
  "pnl_margin": null,
  "status": "open",
  "position_status": null,
  "closed_at": null,
  "reduce_only": false,
  "take_profit_enabled": true,
  "take_profit_executed": false,
  "take_profit_price": "0.13500000",
  "take_profit_price_type": "mark",
  "stop_loss_enabled": true,
  "stop_loss_executed": false,
  "stop_loss_price": "0.14300000",
  "stop_loss_price_type": "mark",
  "metadata": {
    "id": 56013524660920450,
    "bbo": "-",
    "pnl": "0",
    "tif": "gtc",
    "left": -1,
    "mkfr": "0.0002",
    "refr": "0",
    "refu": 0,
    "size": -1,
    "text": "api",
    "tkfr": "0.0005",
    "user": 16778193,
    "price": "0.13898",
    "is_liq": false,
    "status": "open",
    "stp_id": 0,
    "iceberg": 0,
    "stp_act": "-",
    "biz_info": "dual",
    "contract": "DOGE_USDT",
    "is_close": false,
    "update_id": 1,
    "amend_text": "-",
    "fill_price": "0",
    "pnl_margin": "0",
    "create_time": 1765654559.909,
    "update_time": 1765654559.909,
    "is_reduce_only": false
  },
  "is_tpsl": false,
  "tpsl_type": null,
  "parent_trade_id": null,
  "created_at": "2025-12-13T19:36:00.047Z",
  "updated_at": "2025-12-13T19:36:00.047Z"
}
ğŸ“ PING â†’ user=16778193
ğŸ“ PING â†’ user=16778193
ğŸ“ PING â†’ user=16778193
ğŸ“ PING â†’ user=16778193
ğŸ“ PING â†’ user=16778193
ğŸ“ PING â†’ user=16778193
ğŸ“ PING â†’ user=16778193
